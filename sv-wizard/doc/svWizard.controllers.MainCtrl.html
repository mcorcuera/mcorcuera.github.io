<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: MainCtrl</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: MainCtrl</h1>

    




<section>

<header>
    
        <h2>
            <span class="ancestors"><a href="svWizard.html">svWizard</a><a href="svWizard.controllers.html">.controllers</a>.</span>MainCtrl</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    <h4 class="name" id="MainCtrl"><span class="type-signature"></span>new MainCtrl<span class="signature">(scope, state, settings, menu, utils, ngDialog)</span><span class="type-signature"></span></h4>

    



<div class="description">
    MainCtrl controls the main view of the application, where the user can edit
the different parameters using the form and also using the Street View 
panorama viewer. The parameters modified by any of these ways will be 
reflected in the other, as they both modify the <tt>current</tt> request.
When this parameters are modified, the <tt>State</tt> service is used to
save the changes into local storage.
<br/><br/>
This controller also handles generating the request URL and displaying it 
to the user in a dialog, saving the requests and creating new ones.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>scope</code></td>
            

            <td class="type">
            
                
<span class="param-type">Scope</span>


            
            </td>

            

            

            <td class="description last"><b>Injected</b></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>state</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="svWizard.services.State.html">svWizard.services.State</a></span>


            
            </td>

            

            

            <td class="description last"><b>Injected</b></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>settings</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="svWizard.services.Settings.html">svWizard.services.Settings</a></span>


            
            </td>

            

            

            <td class="description last"><b>Injected</b></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>menu</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="svWizard.services.Menu.html">svWizard.services.Menu</a></span>


            
            </td>

            

            

            <td class="description last"><b>Injected</b></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>utils</code></td>
            

            <td class="type">
            
                
<span class="param-type">svWizard.services.Utils</span>


            
            </td>

            

            

            <td class="description last"><b>Injected</b></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ngDialog</code></td>
            

            <td class="type">
            
                
<span class="param-type">ngDialog</span>


            
            </td>

            

            

            <td class="description last"><b>Injected</b></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line24">line 24</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="authenticationMissing"><span class="type-signature"></span>authenticationMissing<span class="type-signature"> :boolean</span></h4>




<div class="description">
    Flag that indicates whether the user is missing to provide the needed
authentication credentials for the selected authentication method. It is 
used in the view to display an error message.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">boolean</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line69">line 69</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="AuthenticationMode"><span class="type-signature"></span>AuthenticationMode<span class="type-signature"> :<a href="svWizard.models.html#.AuthenticationMode">svWizard.models.AuthenticationMode</a></span></h4>






    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="svWizard.models.html#.AuthenticationMode">svWizard.models.AuthenticationMode</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line47">line 47</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="generator_"><span class="type-signature">(private) </span>generator_<span class="type-signature"> :<a href="svWizard.services.utils.generator.html">svWizard.services.utils.generator</a></span></h4>




<div class="description">
    The request generator
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="svWizard.services.utils.generator.html">svWizard.services.utils.generator</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line76">line 76</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="menu"><span class="type-signature"></span>menu<span class="type-signature"> :<a href="svWizard.services.Menu.html">svWizard.services.Menu</a></span></h4>




<div class="description">
    The Menu service used to open and close the side menu
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="svWizard.services.Menu.html">svWizard.services.Menu</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line42">line 42</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="messages"><span class="type-signature"></span>messages<span class="type-signature"> :Object</span></h4>




<div class="description">
    List of messages needed in the view
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Object</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line53">line 53</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="ngDialog_"><span class="type-signature">(private) </span>ngDialog_<span class="type-signature"> :ngDialog</span></h4>




<div class="description">
    ngDialog service to create pop-up dialogs
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">ngDialog</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line83">line 83</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="settings"><span class="type-signature"></span>settings<span class="type-signature"> :<a href="svWizard.services.Settings.html">svWizard.services.Settings</a></span></h4>




<div class="description">
    The application's settings
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="svWizard.services.Settings.html">svWizard.services.Settings</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line36">line 36</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="state"><span class="type-signature"></span>state<span class="type-signature"> :<a href="svWizard.services.State.html">svWizard.services.State</a></span></h4>




<div class="description">
    The application's state
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="svWizard.services.State.html">svWizard.services.State</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line30">line 30</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="addressSelected"><span class="type-signature"></span>addressSelected<span class="signature">(address)</span><span class="type-signature"></span></h4>

    



<div class="description">
    It updates the current request location to the one of the provided address.
<br/><br/>
This function has to be used within the autocomplete directive, so it is
called when the user selects and address.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>address</code></td>
            

            <td class="type">
            
                
<span class="param-type">google.maps.places.PlaceResult</span>


            
            </td>

            

            

            <td class="description last">the selected address on 
 the autocomplete input</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line118">line 118</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="generate"><span class="type-signature"></span>generate<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Generates a Street View request URL based on the current request parameters
and opens the GeneratedDialog to display it
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line131">line 131</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="isApiKey"><span class="type-signature"></span>isApiKey<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    Checks whether the current request is configured to use an API key to
authenticate the request
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line173">line 173</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="isForWork"><span class="type-signature"></span>isForWork<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    Checks whether the current request is configured to use for Work or
Premium Plan, which means using client id and crypto key to authenticate it
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line151">line 151</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="isFree"><span class="type-signature"></span>isFree<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    Checks whether the current request is configured to use the free version, 
which means not using any authentication method
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line162">line 162</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="newRequest"><span class="type-signature"></span>newRequest<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Creates a new request. Note that in the View, this function is called using
the <tt>confirmAction</tt> directive, which means that it won't be executed
when the user clicks the new button, but rather when the users confirms
the action in the dialog that will be prompted. The parameters of the 
new request will remain the same as they were, but it will have no id nor 
name.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line246">line 246</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="onRequestChange"><span class="type-signature"></span>onRequestChange<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Saves the current request in localstorage using the <tt>State</tt> service
and validates the authentication using <tt>validateAuth</tt>.
<br/><br/>
It should be called everytime some parameter on the current request
chages.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line210">line 210</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="save"><span class="type-signature"></span>save<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Opens the save dialog so the user can change the name of the request or
save it as a new request. It will update the current request with the saved
one, which will contain a new id if it's been newly created and a new 
timestamp.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line222">line 222</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="validateAuth"><span class="type-signature"></span>validateAuth<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Checks if the user has provided the needed authentication credentials in
the settings page for the selected authentication method, and updates the
<tt>authenticationMissing</tt> flag accodingly. Should be called everytime
the current request authentication method or the authentication settings 
change.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="controllers_mainCtrl.js.html">controllers/mainCtrl.js</a>, <a href="controllers_mainCtrl.js.html#line186">line 186</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="svWizard.controllers.ConfirmCtrl.html">ConfirmCtrl</a></li><li><a href="svWizard.controllers.GeneratedUrlCtrl.html">GeneratedUrlCtrl</a></li><li><a href="svWizard.controllers.MainCtrl.html">MainCtrl</a></li><li><a href="svWizard.controllers.MenuCtrl.html">MenuCtrl</a></li><li><a href="svWizard.controllers.SaveCtrl.html">SaveCtrl</a></li><li><a href="svWizard.services.Menu.html">Menu</a></li><li><a href="svWizard.services.Menu.Provider.html">Provider</a></li><li><a href="svWizard.services.RequestProvider.html">RequestProvider</a></li><li><a href="svWizard.services.Settings.html">Settings</a></li><li><a href="svWizard.services.State.html">State</a></li></ul><h3>Namespaces</h3><ul><li><a href="svWizard.html">svWizard</a></li><li><a href="svWizard.controllers.html">controllers</a></li><li><a href="svWizard.directives.html">directives</a></li><li><a href="svWizard.models.html">models</a></li><li><a href="svWizard.services.html">services</a></li><li><a href="svWizard.services.utils.html">utils</a></li><li><a href="svWizard.services.utils.generator.html">generator</a></li><li><a href="svWizard.services.utils.numbers.html">numbers</a></li><li><a href="svWizard.services.utils.signing.html">signing</a></li><li><a href="svWizard.services.utils.ui.html">ui</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Mon Mar 07 2016 14:34:36 GMT+0000 (UTC)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>